<% #provide(:title, @user.name) %>
<!-- これより勤怠編集画面 -->
<% require 'date' %>
<% require 'time' %>

<%= @i %>
<%= @test %>

<table class="table table-striped table-bordered">
<thead>
  <tr>
    <th>日付</th>
    <th>曜日</th>
    <th>出社</th>
    <th>退社</th>
    <th>在社時間</th>
    <th>備考</th>
  </tr>
</thead>
 




<!-- これより勤怠編集画面の　1か月分カレンダー始まり -->
<tbody class="bulk-registration-form">
<%= form_for(@user, url: attendance_path) do |f| %>
  <% @attendances.each do |atten| %> 
    <tr>
    <%= fields_for "attendances[]", atten do |ff| %>
          <!--日付-->
         <th><%= @first_day.strftime("%-m/%-d") %></td>
          <!--曜日-->
          <% wd = ["日", "月", "火", "水", "木", "金", "土"] %>
          <th><%= @first_day.strftime("#{wd[@first_day.wday]}") %></th>
          
             <% if  atten.nil? %>
               <th><%= ff.time_field :in_time, value: "", class: "form-control" %></th>
               <th><%= ff.time_field :out_time, value: "", class: "form-control" %></th>
                <th></th>
                <th><% @first_day = @first_day + 1 %></td>
                <% else %>
                <th><%= ff.time_field :in_time, class: "form-control" %></th>
               <th><%= ff.time_field :out_time, class: "form-control" %></th>
                  <% if  atten.out_time.nil? %>
                   <th></th>
                  <% else %>
                    <th><%= ((atten.out_time - atten.in_time) / 60 / 60).floor(2) %></th>
                  <% end %><!--if文の締め-->
                <th><% @first_day = @first_day + 1 %></td>
              <% end %><!-- if文締め-->
            
    <% end %><!-- fields_forの締め -->
  <% end %><!-- @attendances.each 文の締め-->
</tbody>
</table>
<%= f.submit "編集内容で更新", style:"width:300px", class: "btn btn-primary" %>
<% end %><!-- form_for文の締め-->



